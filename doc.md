# 石油电缆防盗系统 - 页面设计文档

## 传感器数据页面(sensor.vue)

### 整体布局

- 居中显示大标题“传感器数据”
- 显示最后更新时间
- 使用 Element UI 的 el-table 组件显示传感器数据表格
- 页面底部显示两个按钮 "发送指令" 和 "刷新数据"
- 加入一个 el-switch 组件实现自动/手动状态切换

### 表格设计

- 表格包含以下列:

  |   列名   |      说明      |
  | :------: | :------------: |
  | 设备 ID  |    设备标识    |
  | 加速度 X |   X 轴加速度   |
  | 加速度 Y |   Y 轴加速度   |
  | 加速度 Z |   Z 轴加速度   |
  | 电缆状态 | 电缆是否被偷盗 |
  |   纬度   |  设备所在纬度  |
  |   经度   |  设备所在经度  |
  |   温度   |    设备温度    |

- 使用 `row-class-name` 为异常数据行添加红色背景高亮

### 交互设计

- 点击 "发送指令" 按钮将显示正在发送指令倒计时,并将按钮变红
- 点击 "刷新数据" 按钮重新获取并显示最新传感器数据
- 切换 el-switch 至 "自动布控" 时显示相关状态

### 数据处理

- 初始时及按下 "刷新数据" 时,访问后端 API 获取模拟设备 Shadow 数据
- 每 1 秒自动轮询请求刷新数据保持实时性
- Shadow 数据中解析出所需各传感器参数显示到表格中

## 关于页面(about.vue)

### 整体布局

- 显示关于页面标题 “关于”
- 展示项目简介段落描述
- 显示作者信息卡片

### 内容设计

- 项目简介概述本系统的主要功能和技术
- 使用卡片展示每个作者的姓名、学校、年级信息
- 加入指向 GitHub 仓库的链接

## 摄像头页面(camera.vue)

### 整体布局

- 显示摄像头实时预览视频流
- 展示录制时间/控制按钮
- 加入视频播放器组件

### 交互设计

- 点击开始录制后启动计时器,录制按钮变为停止录制
- 结束录制后计算总共录制时间
- 播放按钮播放录制的视频
- 下载/清除按钮进行相关操作

### 技术实现

- 使用 MediaDevices API 访问用户媒体设备
- 通过 MediaRecorder 实现视频流录制
- 创建 blob URL 用于视频播放和下载

## 摄像头flv拉流页面(flv.vue)

### 整体布局

- 页面主体为一个 video 组件用于播放 flv 直播流

### 功能实现

- 通过 mpegts.js 库创建 flv 播放器
- 调用 createPlayer 生成播放器实例
- 设置播放地址为 flv 直播流 url
- 将 video 元素绑定到播放器
- 调用 load() 预加载并 play() 开始播放

### 生命周期

- mounted 时创建播放器对象并加载播放 flv 流
- unmounted 时销毁播放器对象释放资源

### 技术细节

- 设置 isLive=false 表示为点播方式播放直播流
- 通过 attachMediaElement() 绑定 video 元素
- destroy() 完全释放播放器资源

### 交互设计

- video 组件加入 autoplay 和 controls 属性
- autoplay 实现加载后自动播放
- controls 显示控制栏可手动控制播放